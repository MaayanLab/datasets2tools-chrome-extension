//////////////////////////////////////////////////////////////////////
///////// 1. Define Main Function ////////////////////////////////////
//////////////////////////////////////////////////////////////////////
////////// Author: Denis Torre
////////// Affiliation: Ma'ayan Laboratory, Icahn School of Medicine at Mount Sinai
////////// Based on Cite-D-Lite (https://github.com/MaayanLab/Cite-D-Lite).

function main() {

	// Locate parents on HTML page
	var parents = Page.locateParents();

	// Get Canned Analyses of corresponding datasets
	var cannedAnalysisInterfaces = API.main(Object.keys(parents));

	// Add Canned Analyses to the webpage
	Page.addInterfaces(parents, cannedAnalysisInterfaces);

	// Add event listeners for interactivity
	eventListener.main(cannedAnalysisInterfaces);
}

//////////////////////////////////////////////////////////////////////
///////// 2. Define Variables ////////////////////////////////////////
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////
////////// 1. Page ///////////////////////////////
//////////////////////////////////////////////////

///// Functions related to the webpage.

var Page = {

	//////////////////////////////
	///// 1. isDataMedSearchResults
	//////////////////////////////

	///// Returns true if the user is on a DataMed search results page, otherwise false

	isDataMedSearchResults: function() {
		// return /https:\/\/datamed\.org\/search\.php\?.*/.test(window.location.href);
		return /.*search.php.*/.test(window.location.href);
	},

	//////////////////////////////
	///// 2. isDataMedLanding
	//////////////////////////////

	///// Returns true if the user is on a DataMed dataset landing page, otherwise false

	isDataMedLanding: function() {
		// return /https:\/\/datamed\.org\/display\-item\.php\?.*/.test(window.location.href);
		return /.*display-item.php.*/.test(window.location.href);
	},

	//////////////////////////////
	///// 3. isGeoSearchResults
	//////////////////////////////

	///// Returns true if the user is on a GEO search results page, otherwise false

	isGeoSearchResults: function() {
		// return /https:\/\/datamed\.org\/search\.php\?.*/.test(window.location.href);
		return /.*gds\/\?term=.*/.test(window.location.href);
	},

	//////////////////////////////
	///// 4. isGeoDatasetLanding
	//////////////////////////////

	///// Returns true if the user is on a GEO dataset landing page, otherwise false

	isGeoDatasetLanding: function() {
		// return /https:\/\/datamed\.org\/display\-item\.php\?.*/.test(window.location.href);
		return /.*sites\/GDSbrowser\?acc=.*/.test(window.location.href);
	},

	//////////////////////////////
	///// 5. isGeoSeriesLanding
	//////////////////////////////

	///// Returns true if the user is on a GEO series landing page, otherwise false

	isGeoSeriesLanding: function() {
		// return /https:\/\/datamed\.org\/display\-item\.php\?.*/.test(window.location.href);
		return /.*geo\/query\/acc.cgi\?acc=.*/.test(window.location.href);
	},

	//////////////////////////////
	///// 6. locateParents
	//////////////////////////////

	///// Locates HTML elements which will be used to extract dataset accessions and append the interfaces

	locateParents: function() {
		var parents = {};
		if (Page.isDataMedSearchResults()) {
			$('.search-result li').each(function(i, elem){ parents[$(elem).find('span[data-original-title]').first().text().trim()] = $(elem) });
		} else if (Page.isDataMedLanding()) {
			$('#accordion-dataset').each(function(i, elem) { parents[$(elem).find('strong:contains(ID:)').parent().next().children(0).text().trim()] = $(elem) });
		} else if (Page.isGeoSearchResults()) {
			$('.rslt').each(function(i, elem) { parents[$(elem).find('.rprtid').first().find('dd').text().trim()] = $(elem) });
		} else if (Page.isGeoDatasetLanding()) {
			$('#gds_details').each(function(i, elem) { parents[$(elem).find('th').first().text().split(':')[0].split(' ').pop()] = $(elem) });
		} else if (Page.isGeoSeriesLanding()) {
			$('.acc').each(function(i, elem) { parents[$(elem).attr('id')] = $(elem).parents().eq(7) });
		}
		return parents;
	},

	//////////////////////////////
	///// 7. addInterfaces
	//////////////////////////////

	///// Adds interfaces to parents

	addInterfaces: function(parents, cannedAnalysisInterfaces) {

		$.each(cannedAnalysisInterfaces, function(datasetAccession, datasetInterfaces) {
			parents[datasetAccession].append(datasetInterfaces['toolbar']);
		})


	}
};

//////////////////////////////////////////////////
////////// 2. API ////////////////////////////////
//////////////////////////////////////////////////

///// Functions related to the API.

var API = {

	//////////////////////////////
	///// 1. main
	//////////////////////////////

	///// Gets interfaces relevant to identified datasets from the API

	main: function(datasetAccessions) {
		// var pageType = (Page.isDataMedSearchResults() || Page.isGeoSearchResults()) ? 'search' : 'landing',
		// 	cannedAnalysisInterfaces = $.ajax({
		// 		async: false,
		// 		url: 'http://localhost:5000/datasets2tools/api/chrome_extension?',
		// 		data: {
		// 		  'page_type': pageType,
		// 		  dataset_accessions: datasetAccessions.join(',')
		// 		},
		// 		success: function(data) {
		// 			return data;
		// 		}
		// 	}).responseText;
		cannedAnalysisInterfaces = {"GSE8565": {"canned_analysis_tables": {"Enrichr": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvv6'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvv5'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buic'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buib'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"], "L1000CDS2": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e799e467bea600fb9702'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e797e467bea600fb9700'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d322e467bea600fb8df8'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d325e467bea600fb8dfa'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"], "PAEA": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3089074'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087316'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Argyrin a treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"]}, "toolbar": "<div class='d2t-wrapper' id='GSE8565'><div class='d2t-toolbar'><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png' data-tool-name='L1000CDS2'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>L1000CDS2</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>An ultra-fast LINCS L1000 Characteristic Direction signature search engine</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png' data-tool-name='Enrichr'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>Enrichr</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>An intuitive web-based gene list enrichment analysis tool with 90 libraries</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png' data-tool-name='PAEA'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>PAEA</p><p class='tool-icon-tooltip-count'>2</p><p class='tool-icon-tooltip-description'>Enrichment analysis tool implementing the principal angle method</p></div></div></div></div>"}, "GSE4668": {"canned_analysis_tables": {"Enrichr": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buoo'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buop'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvpw'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bw6z'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bunw'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='true' data-target-page='1'></div>", "<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bw70'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bunx'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvpv'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='true' data-target-page='0'><img class='right-arrow' src='' data-active='false' data-target-page='2'></div>"], "L1000CDS2": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d5c0e467bea600fb8f20'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d5c3e467bea600fb8f22'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e551e467bea600fb9604'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e554e467bea600fb9606'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d570e467bea600fb8efe'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='true' data-target-page='1'></div>", "<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1ec94e467bea600fb9932'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1ec96e467bea600fb9934'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d56ee467bea600fb8efc'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='true' data-target-page='0'><img class='right-arrow' src='' data-active='false' data-target-page='2'></div>"], "PAEA": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087517'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3089500'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087545'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3088884'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"]}, "toolbar": "<div class='d2t-wrapper' id='GSE4668'><div class='d2t-toolbar'><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png' data-tool-name='L1000CDS2'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>L1000CDS2</p><p class='tool-icon-tooltip-count'>8</p><p class='tool-icon-tooltip-description'>An ultra-fast LINCS L1000 Characteristic Direction signature search engine</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png' data-tool-name='Enrichr'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>Enrichr</p><p class='tool-icon-tooltip-count'>8</p><p class='tool-icon-tooltip-description'>An intuitive web-based gene list enrichment analysis tool with 90 libraries</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png' data-tool-name='PAEA'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>PAEA</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>Enrichment analysis tool implementing the principal angle method</p></div></div></div></div>"}, "GSE26298": {"canned_analysis_tables": {"Enrichr": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvp7'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvp8'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bue4'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bue3'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"], "L1000CDS2": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e50be467bea600fb95e6'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e508e467bea600fb95e4'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d163e467bea600fb8d36'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1d160e467bea600fb8d34'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"], "PAEA": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3088860'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087164'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following 4-hydroxytamoxifen treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"]}, "toolbar": "<div class='d2t-wrapper' id='GSE26298'><div class='d2t-toolbar'><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png' data-tool-name='L1000CDS2'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>L1000CDS2</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>An ultra-fast LINCS L1000 Characteristic Direction signature search engine</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png' data-tool-name='Enrichr'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>Enrichr</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>An intuitive web-based gene list enrichment analysis tool with 90 libraries</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png' data-tool-name='PAEA'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>PAEA</p><p class='tool-icon-tooltip-count'>2</p><p class='tool-icon-tooltip-description'>Enrichment analysis tool implementing the principal angle method</p></div></div></div></div>"}, "GSE24592": {"canned_analysis_tables": {"Enrichr": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bv0z'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buzr'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bv18'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bv17'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvmc'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='true' data-target-page='1'></div>", "<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bvmb'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1bv0y'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes downregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/Enrichr/enrich?dataset=1buzs'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes upregulated following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='true' data-target-page='0'><img class='right-arrow' src='' data-active='false' data-target-page='2'></div>"], "L1000CDS2": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1dadfe467bea600fb9168'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1dafde467bea600fb9176'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1dafae467bea600fb9174'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1dae2e467bea600fb916a'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e3d6e467bea600fb955e'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='true' data-target-page='1'></div>", "<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1e3d3e467bea600fb955c'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1da65e467bea600fb9132'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which reverse Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/L1000CDS2/#/result/58d1da62e467bea600fb9130'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png'></a></td class='canned-analysis-title-cell'>Small molecules which mimic Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='true' data-target-page='0'><img class='right-arrow' src='' data-active='false' data-target-page='2'></div>"], "PAEA": ["<table class='d2t-canned-analysis-table'><tr><th>Link</th><th>Title</th><th>Metadata</th><th>Share</th></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087996'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087944'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3087987'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr><tr><td class='canned-analysis-url-cell'><a href='http://amp.pharm.mssm.edu/PAEA?id=3088756'><img class='canned-analysis-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png'></a></td class='canned-analysis-title-cell'>Enrichment analysis of genes dysregulated  following Estradiol treatment<td></td><td class='canned-analysis-metadata-cell'>Metadata</td><td class='share-canned-analysis-cell'>Share</td></tr></table><div class='arrow-wrapper'><img class='left-arrow' src='' data-active='false' data-target-page='-1'><img class='right-arrow' src='' data-active='false' data-target-page='1'></div>"]}, "toolbar": "<div class='d2t-wrapper' id='GSE24592'><div class='d2t-toolbar'><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/l1000cds2.png' data-tool-name='L1000CDS2'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>L1000CDS2</p><p class='tool-icon-tooltip-count'>8</p><p class='tool-icon-tooltip-description'>An ultra-fast LINCS L1000 Characteristic Direction signature search engine</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/enrichr.png' data-tool-name='Enrichr'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>Enrichr</p><p class='tool-icon-tooltip-count'>8</p><p class='tool-icon-tooltip-description'>An intuitive web-based gene list enrichment analysis tool with 90 libraries</p></div></div><div class='tool-icon-wrapper'><img class='tool-icon-img' src='http://lincsproject.org/LINCS/files/tools_logos/paea.png' data-tool-name='PAEA'><div class='tool-icon-tooltip'><p class='tool-icon-tooltip-name'>PAEA</p><p class='tool-icon-tooltip-count'>4</p><p class='tool-icon-tooltip-description'>Enrichment analysis tool implementing the principal angle method</p></div></div></div></div>"}};
		return cannedAnalysisInterfaces;
	}

};

//////////////////////////////////////////////////
////////// 3. eventListener //////////////////////
//////////////////////////////////////////////////

///// Event listeners.

var eventListener = {

	clickToolbarIcon: function() {
		$(document).on('click', '.tool-icon-img', function(evt) {
			alert('hello');
		})
	},

	//////////////////////////////
	///// . main
	//////////////////////////////

	///// Main wrapper.

	main: function(datasetAccessions) {
		var self = this;
		this.clickToolbarIcon();
	}

};

//////////////////////////////////////////////////////////////////////
///////// 3. Run Main Function ///////////////////////////////////////
//////////////////////////////////////////////////////////////////////
main();
